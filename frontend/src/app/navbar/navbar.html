<nav class="navbar">
  <div class="logo" routerLink="/">
    <i class="fas fa-leaf icon"></i>
    <span>Greenie Culture</span>
  </div>
  <div class="search-container">
    <div class="search-box">
      <i class="fas fa-search search-icon"></i>
      <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()" placeholder="Search For Plants...">
    </div>

    <!-- Search Results Dropdown -->
    <div class="search-results-dropdown" *ngIf="showResults">
      <div class="search-result-item" *ngFor="let product of searchResults" (click)="selectProduct(product)">
        <div class="product-thumb">
          <img [src]="product.image" [alt]="product.name">
        </div>
        <div class="product-info">
          <div class="product-name">{{ product.name }}</div>
          <div class="product-category">{{ product.category }}</div>
        </div>
        <div class="product-price">â‚¹{{ product.price }}</div>
      </div>
      <div class="no-results" *ngIf="searchResults.length === 0">
        No plants found for "{{ searchTerm }}"
      </div>
    </div>
  </div>
  <div class="nav-icons">
    <ng-container *ngIf="authService.isLoggedIn$ | async; else loginBtn">
      <div class="user-profile">
        <span class="welcome-text">Hello, <strong>{{ authService.currentUser$ | async }}</strong></span>
        <a *ngIf="authService.isAdmin$ | async" routerLink="/admin-dashboard" class="admin-link">
          <i class="fas fa-user-shield"></i> Admin
        </a>
        <button class="logout-btn" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </button>
      </div>

      <div class="profile-icon-wrapper" routerLink="/user-panel" title="User Dashboard">
        <i class="fas fa-user-circle"></i>
      </div>
    </ng-container>

    <ng-template #loginBtn>
      <button class="login-icon-btn" type="button" routerLink="/login" title="Login" aria-label="Open login page">
        <i class="far fa-user"></i>
      </button>
    </ng-template>

    <div class="cart-icon-wrapper" (click)="toggleCart()" title="Cart">
      <i class="fas fa-shopping-bag"></i>
      <span class="cart-badge" *ngIf="cartCount > 0">{{ cartCount }}</span>
    </div>
  </div>
</nav>