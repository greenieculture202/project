<div class="register-page">
    <div class="background-art"></div>
    <div class="background-overlay"></div>

    <div class="register-shell">
        <header class="register-header">
            <div class="brand-badge">
                <i class="fas fa-leaf"></i>
                <span>Greenie Culture</span>
            </div>
            <h1>Join Our Oasis</h1>
            <p>Ready to start your green journey?</p>
        </header>

        <!-- Error Toast (like login) -->
        <div class="crystal-toast" *ngIf="registerError" (click)="registerError = ''">
            <div class="toast-content">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="toast-text">
                    <span class="toast-title">Registration Issue</span>
                    <p>{{ registerError }}</p>
                </div>
            </div>
            <div class="toast-progress"></div>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
            <div class="compact-grid">
                <!-- Row 1 -->
                <div class="field-box">
                    <label>Full Name</label>
                    <div class="input-container"
                        [class.field-error]="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched">
                        <i class="far fa-user"></i>
                        <input type="text" formControlName="fullName" placeholder="Full Name">
                    </div>
                    <div class="error-tag"
                        *ngIf="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched">
                        <i class="fas fa-circle-exclamation"></i>
                        <span *ngIf="registerForm.get('fullName')?.errors?.['required']">Name is required</span>
                        <span *ngIf="registerForm.get('fullName')?.errors?.['minlength']">Min 2 characters</span>
                    </div>
                </div>

                <div class="field-box">
                    <label>Phone Number</label>
                    <div class="input-container"
                        [class.field-error]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                        <i class="fas fa-mobile-alt"></i>
                        <input type="tel" formControlName="phone" placeholder="9876543210">
                    </div>
                    <div class="error-tag"
                        *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                        <i class="fas fa-circle-exclamation"></i>
                        <span *ngIf="registerForm.get('phone')?.errors?.['required']">Phone is required</span>
                        <span *ngIf="registerForm.get('phone')?.errors?.['pattern']">Valid 10-digit number</span>
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="field-box span-2">
                    <label>Email Address</label>
                    <div class="input-container"
                        [class.field-error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                        <i class="far fa-envelope"></i>
                        <input type="email" formControlName="email" placeholder="example@gmail.com">
                    </div>
                    <div class="error-tag"
                        *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                        <i class="fas fa-circle-exclamation"></i>
                        <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</span>
                        <span *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format</span>
                        <span *ngIf="registerForm.get('email')?.errors?.['gmailOnly']">Must use @gmail.com</span>
                    </div>
                </div>

                <!-- Row 3 -->
                <div class="field-box span-2">
                    <label>Residence (Address)</label>
                    <div class="input-container textarea-box"
                        [class.field-error]="registerForm.get('address')?.invalid && registerForm.get('address')?.touched">
                        <i class="fas fa-location-arrow"></i>
                        <textarea formControlName="address" placeholder="Address, City, State, PIN" rows="1"></textarea>
                    </div>
                    <div class="error-tag"
                        *ngIf="registerForm.get('address')?.invalid && registerForm.get('address')?.touched">
                        <i class="fas fa-circle-exclamation"></i>
                        <span *ngIf="registerForm.get('address')?.errors?.['required']">Address is required</span>
                        <span *ngIf="registerForm.get('address')?.errors?.['minlength']">Min 5 characters</span>
                    </div>
                </div>

                <!-- Row 4 -->
                <div class="field-box span-2">
                    <label>Create Password</label>
                    <div class="input-container"
                        [class.field-error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
                        <i class="fas fa-key"></i>
                        <input [type]="isPasswordVisible ? 'text' : 'password'" formControlName="password"
                            placeholder="6+ characters">
                        <button type="button" class="eye-btn" (click)="togglePasswordVisibility()">
                            <i [class]="isPasswordVisible ? 'far fa-eye-slash' : 'far fa-eye'"></i>
                        </button>
                    </div>
                    <div class="error-tag"
                        *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
                        <i class="fas fa-circle-exclamation"></i>
                        <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</span>
                        <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Min 6 characters</span>
                    </div>
                </div>
            </div>

            <button type="submit" class="submit-btn" [disabled]="isLoading">
                <span class="btn-text">{{ isLoading ? 'Creating...' : 'SIGN UP NOW' }}</span>
                <i class="fas fa-arrow-right" *ngIf="!isLoading"></i>
                <i class="fas fa-spinner fa-spin" *ngIf="isLoading"></i>
            </button>

            <footer class="register-footer">
                <span>Already a member?</span>
                <a routerLink="/login" class="signin-link">Sign In</a>
            </footer>
        </form>
    </div>
</div>